@page
@model IndexModel
@{
    Model.SetPageData(ViewData);
}

<div class="text-center">
    <h1 class="display-4">
        Вітаємо</>@if(Model.IsLoggedIn){<span>, @Model.LoginData?.Name!</span>}
    </h1>
</div>
<div class="d-flex justify-content-end">
    <form asp-page-handler="login">
        @if (Model.IsLoggedIn)
        {
            <label for="btnLogout">Ваша роль: @Model.LoginData?.Role</label>
            <input type="submit" value="Вийти" id="btnLogout" />
        }
        else
        {
            <label for="userId">Id користувача</label>
            <input type="text" name="userId" id="userId" />
            <input type="submit" value="Увійти" />
        }
    </form>
</div>
<h2 class="text-center mt-5" style="color:red">Тестовий сервер!</h2>
<h3 class="mt-3 fw-bold">єВибір — вибір є!</h3>
<p>Система симуляції можливих онлайн-виборів в Україні. Міністерству Цифрової трансформації надається право використання цього вихідного коду під їх потреби.</p>
<h4>Чого в системі нема</h4>
<p>(і не буде, як мінімум на цьому сервері) — це справжня авторизація. Ідея в тому щоб, користувачі авторизувалися через ДіЯ&reg; OAUTH, але я не банк і не держустанова, тож тестова авторизація працює за числовими ідентифікаторами.</p>
<p>Для підтримки роботи системи, в цьому сервері згенеровано близько 50 рандомних ПІБ.</p>
<p>Для <b>входу в цю тестову систему</b> введіть число - ID користувача. Стартовий набір ролей:</p>
<table class="table">
    <thead>
        <tr>
            <td>Id користувача</td>
            <td>Значення</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td><b>Адмін</b> - всі права. Може змінювати записи з минулого, які для інших ролей лише в режимі "для читання". Ще може реєструвати користувачів з ролями 1-3.</td>
        </tr>
        <tr>
            <td>2</td>
            <td><b>Центральна виборча комісія</b>. Реєстрація виборів і кандидатів; створення бюлетенів.</td>
        </tr>
        <tr>
            <td>3</td>
            <td><b>Територіальна виборча комісія</b>. Реєстрація виданих виборцям бюлетеней.</td>
        </tr>
        <tr>
            <td>Будь-який інший від @int.MinValue до @int.MaxValue (якщо не зареєстровано Адміном)</td>
            <td><b>Виборець</b>. Може отримати бюлетень і проголосувати, як і попередні ролі.</td>
        </tr>
        <tr>
            <td>(ви не увійшли в систему) або (вік недостатній)</td>
            <td><b>Гість</b>. Має доступ до звітів і політики конфіденційності, як і всі інші ролі.</td>
        </tr>
    </tbody>
</table>
<h4>Що в системі є</h4>
<h5>Функціонал</h5>
<ul>
    <li>Реєстрація і видалення користувачів з різними ролями. Контроль доступу відповідно до ролі.</li>
    <li>Реєстрація виборів (виборчих подій).</li>
    <li>Реєстрація кандидатів. Підтримуються фізичні особи і партії. Є також спеціальний пункт "Зіпсувати бюлетень".</li>
    <li>Створення бюлетеней на вибори з кандидатів. Підтримується додавання фіз. осіб до партій на рівні окремих виборів.</li>
    <li>Видача бюлетеня на вибори, що відбуваються, — як самостійно, так і офлайн в виборчих дільничках.</li>
    <li>Власне, голосування. Підтримується новий виборчий кодекс з можливістю голосувати за партію і додатково за кандидата від неї.</li>
    <li>Перегляд звітів по результатам голосування (в реальному часі). Система автоматично звіряє результати.</li>
</ul>
<h5>Відповідність законодавству</h5>
<ul>
    <li>Таємність голосування. На рівні системи (бази даних) немає відстеження громадянин - голос. Технічні засоби унеможливлюють дублювання голосів через систему.</li>
    <li>Відкритість голосування. Спостерігати прогрес виборів і перевіряти дані в реальному часі може хто завгодно.</li>
    <li>Єдине голосування. Система дозволяє побачити з виборчих дільниць що громадянин вже проголосував онлайн. Система також бачить виданий офлайн бюлетень і не дає проголосувати онлайн.</li>
    <li>Заміна бюлетеня. Система дозволяє відкликати бюлетень виданий як онлайн (лише виборець) так і офлайн (лише тервиборчком).</li>
    <li>Право волевиявлення. Система перевіряє, шо громадянин, який входе в систему, досяг 18-річчя. Оскільки всі дані згенеровано, всі користувачі проходять, але перевірка все ж відбувається.</li>
</ul>
<h5>Потрібні зміни до законодавства</h5>
<ul>
    <li>Необхідно встановити процедуру видачі бюлетеня офлайн, що включає обов'язкову перевірку чи вже було видано бюлетень онлайн. Офлайн бюлетень не може бути видано допоки онлайн бюлетень активний. І навпаки теж, і це має бути прописане в з-ві.</li>
</ul>